<!doctype html>
<html lang="zh-CN">

<head>
        <!-- Required meta tags -->
    <link rel="canonical" href="https://irelandaddress.github.io/html/category/article-4212.htm" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/assets/addons/xcblog/img/irelandaddress/favicon.ico" type="image/x-icon"/>
    <title>树莓派安装centos运行dotnet应用的实践 - Ireland Address</title>
        <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;700&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/addons/xcblog/fonts/irelandaddress/icomoon/style.css">
    <link rel="stylesheet" href="/assets/addons/xcblog/fonts/irelandaddress/flaticon/font/flaticon.css">
    <link rel="stylesheet" href="/assets/addons/xcblog/css/irelandaddress/bootstrap.css">
    <link rel="stylesheet" href="/assets/addons/xcblog/css/irelandaddress/tiny-slider.css">
    <link rel="stylesheet" href="/assets/addons/xcblog/css/irelandaddress/aos.css">
    <link rel="stylesheet" href="/assets/addons/xcblog/css/irelandaddress/style.css">
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?638cd9f716f7b41384d0241d34bf2f4c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3332997411212854"
     crossorigin="anonymous"></script>
</head>

<body>
        <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
            <div class="site-mobile-menu-close">
                <span class="icofont-close js-menu-toggle"></span>
            </div>
        </div>
        <div class="site-mobile-menu-body"></div>
    </div>
    <nav class="site-nav mt-3">
        <div class="container">
            <div class="site-navigation">
                                <a href="/" class="logo m-0 mt-2 float-start">Ireland Address</a>
                                <ul class="js-clone-nav d-none d-lg-inline-block text-start site-menu float-end">
                                        <li><a href="/">首页</a></li>
                                        <li><a href="/html/category/">文章分类</a></li>
                                        <li><a href="#">关于</a></li>
                    <li><a href="#">联系</a></li>
                </ul>
                <a href="#" class="burger ml-auto float-right site-menu-toggle js-menu-toggle d-inline-block d-lg-none" data-toggle="collapse" data-target="#main-navbar">
                    <span></span>
                </a>
            </div>
        </div>
    </nav>
    <div class="hero-section body-page">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-lg-5">
                    <h2 class="heading mb-3" data-aos="fade-up" data-aos-delay="100">文章分类</h2>
                    <p class="mb-5" data-aos="fade-up" data-aos-delay="200">
                        <a href="/">首页</a> / <a href="/html/category/">文章分类</a> / 正文
                    </p>
                </div>
                <div class="col-lg-6">
                    <div class="img-wrap" data-aos="fade-left">
                        <img src="/assets/addons/xcblog/img/irelandaddress/hero_1.png" alt="Image" class="img-fluid">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="section section-3">
        <div class="container">
            <div class="row">
                <div class="col-md-9">
                    <div data-aos="fade-up">
                        <h1 class="mb-5 text-center">树莓派安装centos运行dotnet应用的实践</h1>
                          				  				  				<div id="content_views" class="markdown_views prism-atom-one-light"> <p>在树莓派3上运行dotnet应用，这个过程走了很多弯路，也浪费了不少时间，所以记录一下，供大家参考。树莓派官方提供的镜像系统，是Debian系统，由于习惯了centos的操作，所以选择了安装centos。centos系统的选择是非常重要的，我用的是树莓派3，1G的内存，尝试过Centos7的多个树莓派镜像版本后，都有但是太多麻烦的问题需要自己处理，比如 sd卡扩容，连接sftp,运行dotnet 报错<code>GLIBCXX_3.4.20 not found</code>，数据库安装失败等一堆问题要等着处理，在尝试centos8系统时，成功跑起了dotnet应用;最终选择使用了centos8的树莓派镜像版本.</p> <h3>准备</h3> <p>硬件：树莓派3, sd卡<br /> 软件：win32DiskImage，centos8树莓派镜像<br /> 我己上传至百度云盘(提取码：d3ag)和阿里云盘，需要的自己下载;</p> <h4>1.系统环境搭建</h4> <p>centos7有很多问题需要自己动手去解决，所以系统使用centos8的树莓派镜像，在centos官方找到树莓派8的镜像，或到网盘下载;我的树莓派3上使用的是镜像CentOS-Userland-8-stream-aarch64-RaspberryPI-Minimal-4-sda.raw</p> <h5>烧录centos8镜像</h5> <p>用到软件Win32 Disk Imager，烧录centos镜像到SD卡步骤：<br /> a.插入SD卡，打开Win32 Disk Imager<br /> b.选择解压后的镜像CentOS-Userland-8-stream-aarch64-RaspberryPI-Minimal-4-sda.raw<br /> c.点击Write<br /><img decoding="async" src="http://img.555519.xyz/uploads/20221105/3700bfaccc5c1ee11f84e34b9787bf7a.jpg" alt="树莓派安装centos运行dotnet应用的实践"></p> <p>d.完成后，将sd卡插入树莓派</p> <h5>启动树莓派的系统</h5> <p>将树莓派通电，系统启动后，默认系统的帐号root 默认密码为centos,输入帐号密码完成系统登录</p> <h5>1.1 连接wifi网络</h5> <p>查看附近wifi<br /><code>nmcli d wifi</code><br /> 连接指定wifi<br /><code>nmcli d wifi connect wifi名称 password wifi密码</code></p> <h5>1.2 扩容SD卡</h5> <p>使用CentOS官网镜像进行烧录的系统大约只占用了2G的空间，我用的SD卡有16G的空间,约12g没有使用，这时候需要将sd卡进行扩容<br /> 扩容步骤：<br /><code>yum install -y lvm2</code><br /><code>yum -y install cloud-utils-growpart.noarch</code><br /><code>growpart /dev/mmcblk0 3</code> #[注意这里是mmcblk0 ‘空格’ 3] （此步骤将余下未分配的11.2G空间扩展到了/dev/mmcblk0p3分区上了）<br /><code>resize2fs /dev/mmcblk0p3</code> #拉伸一下分区<br /> 操作完成,查看一下，/dev/root分区扩容成功<br /><code>df -h</code></p> <h3>2.软件环境安装</h3> <p>现在树莓派的连接方式还是直连键盘和显示器的方式，安装一个web管理界面，就可以通过网络对树莓派进行操作了</p> <h5>2.1安装cockpit</h5> <p>cockpit是一款功能强大的linux监控工具，提供了web方式操控终端和docker镜像，还有一个好处是，可以复制粘帖linux命令了<br /> cockpit安装骤：<br /> a.安装cockpit<br /><code>sudo yum install -y cockpit</code><br /> //如果你想要防火墙功能，安装<br /><code>firewalldsudo yum install firewalld</code><br /> //如果你想要虚拟机管理功能，安装<br /><code>cockpit-machinessudo apt install cockpit-machines</code><br /> //如果你想要容器管理功能，安装cockpit-podman,podman命令行完全兼容docker，也可以替代docker使用<br /><code>yum install -y cockpit-podman</code><br /> b.安装完毕之后，启动服务<br /><code>sudo systemctl start cockpit</code><br /> c.设置cockpit开机自动启动<br /><code>sudo systemctl enable --now cockpit.socket</code><br /> d.重启后<code>reboot</code>，开始容器管理</p> <p>e.进入web管理界面<br /> 使用PC打开 http://树莓派IP:9090 进行操作,可以通过web方式访问树莓派终端<br /><img decoding="async" src="http://img.555519.xyz/uploads/20221105/5ad33b7736cebf7dd76a0d8ebb917d1b.jpg" alt="树莓派安装centos运行dotnet应用的实践"></p> <h5>2.2 安装必要软件</h5> <p><code>sudo yum install -y gcc gcc-c++ icu make git cmake vim curl wget tar libtool net-tools</code><br /> a.软件升级<br /> 通过软件更新，可以用鼠标进行centos8升级操作<br /><img decoding="async" src="http://img.555519.xyz/uploads/20221105/b14838b3a1c8788a890c77733bced7e8.jpg" alt="树莓派安装centos运行dotnet应用的实践"></p> <p>b.更换yum源为阿里云<br /> 备份<br /><code>cd /etc/yum.repos.d</code><br /><code>cp CentOS-Base.repo CentOS-Base.repo.bak</code><br /> 下载阿里云源文件<br /><code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-8.repo</code><br /> 清除旧的yum缓存并生成新的yum缓存<br /><code>yum clean all</code><br /><code>yum makecache</code></p> <h5>centos 防火墙管理</h5> <p>进入web管理界面，点击网络，进行网络管理<br /><img decoding="async" src="http://img.555519.xyz/uploads/20221105/575faeefeb8215de335c1a5784f111ef.jpg" alt="树莓派安装centos运行dotnet应用的实践"></p> <h5>2.3 安装dotnet环境</h5> <p>要使用linux arm64版本的dotnet，该版本需要使用手动安装完成<br /> 可以从微软官方.NET 6.0下载dotnet,当前版本6.0<br /> 具体安装步骤：</p> <p>2.3.1 下载并安装.net环境</p> <p><code>wget https://download.visualstudio.microsoft.com/download/pr/adcd9310-5072-4179-9b8b-16563b897995/15a7595966f488c74909e4a9273c0e24/dotnet-sdk-6.0.100-linux-arm64.tar.gz &&mkdir -p $HOME/dotnet && tar zxf dotnet-sdk-6.0.100-linux-arm64.tar.gz -C $HOME/dotnet</code></p> <p>2.3.2 设置dotnet路径，使其开机后也可以正常使用dotnet<br /> 执行<br /><code>vi .bashrc</code><br /> 添加两行代码到文件末尾</p> <pre><code>export DOTNET_ROOT=$HOME/dotnet export PATH=$PATH:$HOME/dotnet</code></pre> <p><code>:wq</code>保存并重启<code>reboot</code></p> <h5>2.4 安装supervisor</h5> <p>2.4.1 安装epel源<br /><code>yum install -y epel-release</code></p> <p>2.4.2 安装supervisor<br /><code>yum install -y supervisor</code><br /> supervisor默认配置文件放在<code>/etc/supervisord.d/*.ini</code></p> <p>2.4.3 设置supervisor为开机启动<br /><code>systemctl start supervisord.service</code><br /> 点击服务，搜索supervisord 设为开机启动即可</p> <p>2.4.4 启动supervisord<br /> 查看应用进程 ps -ef | grep 应用名称<br /><code>ps -ef | grep supervisord</code><br /> 如果supervisord进程己启动就结束进程<br /><code>kill -9 进程id</code></p> <p>启动supervisord<br /><code>supervisord -c /etc/supervisord.conf</code></p> <h5>2.5 安装nginx与myql</h5> <p>经过测试，这个版本系统，通过lnmp就可以正常安装，执行<br /><code>wget http://soft.vpser.net/lnmp/lnmp1.7.tar.gz -cO lnmp1.7.tar.gz && tar zxf lnmp1.7.tar.gz && cd lnmp1.7 && ./install.sh lnmp</code><br /> 或者 单独安装<br /> 安装nginx<code>./install.sh nginx</code><br /> 安装数据库<code>./install.sh db</code><br /> 有熟悉的镜像，也可以通过podman容器安装</p> <h5>2.6 安装LinkX</h5> <p>LinkX是免费的内网穿透工具，可以直接使用https访问，有了它，就可以在外网时操控家里的这台树莓派了，LinkX安装步骤如下：<br /> 2.6.1 当前树莓派安装的是LinkX-linux-arm64版本，所以安装LinkX-linux-arm64版本，执行<br /><code>wget http://down.tthongbao.cn/LinkX-linux-arm64.tar.gz&&mkdir -p $HOME/LinkX && tar zxf LinkX-linux-arm64.tar.gz -C $HOME/LinkX && cd LinkX</code></p> <p>2.6.2 打开https://u.rscode.cn , 点击自动生成配置文件，会自动生成LinkX的配置文件，然后替换掉压缩包里的同名文件appsettings.json;<br /><img decoding="async" src="http://img.555519.xyz/uploads/20221105/f74434b699880dec5b2dbe0eefeba65f.jpg" alt="树莓派安装centos运行dotnet应用的实践"></p> <p>这个步骤，也可以在生成配置后，通过执行<code>vi appsettings.json</code> 进行手动修改其内容</p> <p>2.6.3 修改LinkX权限，<code>sudo chmod 777 $HOME/LinkX/LinkX</code></p> <p>2.6.4 进入LinxX目录,运行<code>./LinkX</code></p> <p>2.6.5 设置LinkX为开机自动启动<br /> 在 /etc/supervisord.d/目录下创建应用的配置,文件名为linkx.ini，内容为</p> <pre><code>[program:linkx] command= /root/LinkX/LinkX  directory=/root/LinkX  autorestart=true stderr_logfile=/var/log/linkx.err.log stdout_logfile=/var/log/linkx.out.log  environment=ASPNETCORE_ENVIRONMENT=Production user=root  stopsignal=INT</code></pre> <p>加载supervisor配置<br /><code>supervisorctl reload</code><br /> 现在己可以开机LinkX自动运行，清理下浏览器的cookie缓存，用浏览器访问绑定的网址，就可以操作内网中的树莓派了,记得通过<code>passwd</code>命令更换一下系统密码</p> <p>####总结：搜索网络上好多文章，并不适合树莓派3;系统版本选择是关键，配合web管理界面，会事半功倍，节省很多时间！！！</p> </div> 			                    </div>

                    <div class="col-md-12 mt-5">
                                                <p>上一个：<a href="/html/category/article-4211.htm">Vue使用自定义指令实现拖拽行为</a></p>
                                                <p>下一个：<a href="/html/category/article-4213.htm">vue中跨组件传参方式详解</a></p>
                                            </div>

                    
                </div>
                <div class="col-md-3">
                    <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">热门文章</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2"><a href="/html/category/article-6872.htm" title="陈佳玉（嫁个老公过日子陈佳玉妈妈叫什么）">陈佳玉（嫁个老公过日子陈佳玉妈妈叫什么）</a></li>
                        <li class="py-2"><a href="/html/category/article-7149.htm" title="兽用疫苗保存温度（兽用疫苗冰箱）">兽用疫苗保存温度（兽用疫苗冰箱）</a></li>
                        <li class="py-2"><a href="/html/category/article-7103.htm" title="晚礼服十大品牌排行榜有哪些牌子(晚礼服十大品牌排行榜有哪些图片)">晚礼服十大品牌排行榜有哪些牌子(晚礼服十大品牌排行榜有哪些图片)</a></li>
                        <li class="py-2"><a href="/html/category/article-6780.htm" title="动物疫苗预防控制中心官网电话（动物疫苗厂家电话）">动物疫苗预防控制中心官网电话（动物疫苗厂家电话）</a></li>
                        <li class="py-2"><a href="/html/category/article-6176.htm" title="周慧敏和倪震结婚照片大全（周慧敏）奔走相告，">周慧敏和倪震结婚照片大全（周慧敏）奔走相告，</a></li>
                        <li class="py-2"><a href="/html/category/article-7516.htm" title="领养宠物协议书范本下载电子版图片（领养宠物协议书范本下载电子版图片大全）">领养宠物协议书范本下载电子版图片（领养宠物协议书范本下载电子版图片大全）</a></li>
                        <li class="py-2"><a href="/html/category/article-6642.htm" title="动物防疫站在哪个位置啊 动物防疫站在哪个位置啊图片">动物防疫站在哪个位置啊 动物防疫站在哪个位置啊图片</a></li>
                        <li class="py-2"><a href="/html/category/article-7701.htm" title="人每天饮酒量(成人每天饮酒量多少毫升)">人每天饮酒量(成人每天饮酒量多少毫升)</a></li>
                        <li class="py-2"><a href="/html/category/article-6918.htm" title="天宠宠物医院怎么样可靠吗多少钱（天宠科技有限公司）">天宠宠物医院怎么样可靠吗多少钱（天宠科技有限公司）</a></li>
                        <li class="py-2"><a href="/html/category/article-6735.htm" title="中国老品牌的洗发水有哪些(国货老牌子洗发水有哪些)">中国老品牌的洗发水有哪些(国货老牌子洗发水有哪些)</a></li>
                    </ul>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">归纳</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">30</span> <a href="/html/date/2024-08/" title="2024-08 归档">2024-08</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">60</span> <a href="/html/date/2024-07/" title="2024-07 归档">2024-07</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">33</span> <a href="/html/date/2024-04/" title="2024-04 归档">2024-04</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">62</span> <a href="/html/date/2024-03/" title="2024-03 归档">2024-03</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">44</span> <a href="/html/date/2024-02/" title="2024-02 归档">2024-02</a></h4>
            </li>
                    </ul>
    </div>
</div>



                </div>
            </div>
        </div>
    </div>
        <div class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <p>
                        Ireland Address 版权所有
                        <br />
                        Powered by WordPress
                    </p>
                </div>
            </div>
        </div>
    </div>
    <script src="/assets/addons/xcblog/js/frontend/irelandaddress/jquery.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/irelandaddress/bootstrap.bundle.min.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/irelandaddress/tiny-slider.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/irelandaddress/aos.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/irelandaddress/navbar.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/irelandaddress/counter.js"></script>
    <script src="/assets/addons/xcblog/js/frontend/irelandaddress/custom.js"></script>
    <script>
    $(function() {
        $('.js_to').click(function(){
            var url = $(this).data('url');
            var code = $(this).data('code');
            url += code;

            window.open(url);
        })
    });
    </script>
</body>

</html>